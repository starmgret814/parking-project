<mat-card class="card-style">
  <mat-card-content>
    <!-- Título -->
    <div class="d-flex flex-column gap-3">
      <div class="m-r-auto m-b-24 m-t-5">
        <mat-card-title class="f-s-24 f-w-600">Generar Reporte</mat-card-title>
      </div>

      <!-- DatePicker -->

      <div
        class="m-r-24"
        style="
          display: flex;
          gap: 1rem;
          flex-wrap: wrap;
          margin-bottom: 1rem;
          width: 285px;
        "
      >
        <mat-form-field appearance="outline">
          <mat-label>Seleccione un rango de fechas</mat-label>
          <mat-date-range-input [rangePicker]="rangePicker">
             <input matStartDate placeholder="Fecha Inicio" [formControl]="fechaInicio" />
            <input matEndDate placeholder="Fecha Fin" [formControl]="fechaFin" />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="rangePicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #rangePicker>
            <mat-date-range-picker-actions>
              <button mat-button matDateRangePickerCancel>Cancelar</button>
              <button mat-flat-button matDateRangePickerApply>Aplicar</button>
            </mat-date-range-picker-actions>
          </mat-date-range-picker>
        </mat-form-field>
      </div>

      <!-- Botones alineados a la derecha -->

      <div
        class="m-r-24"
        style="display: flex; justify-content: flex-end; line-height: 36.5px"
      >
         <!-- Botón Buscar -->
          <button
            mat-flat-button
            color="primary"
            style="line-height: 36.5px; height: 36.5px"
            (click)="obtenerTickets()"
          >
            Buscar
          </button>
      </div>

      <div
        style="display: flex; justify-content: flex-end; line-height: 36.5px"
      >
        <button
        mat-flat-button
        color="primary"
        style="line-height: 36.5px; height: 36.5px"
        (click)="exportarTicketsExcel()"
      >
        Exportar a Excel
      </button>
      </div>
    </div>

    <!-- Tabla de datos -->
     

    <div class="table-responsive">
      
       <!-- Imagen mientras no hay datos -->
      <div *ngIf="!dataLoaded" class="d-flex justify-content-center align-items-center" style="height: 650px;">
        <img src="../../../../assets/images/backgrounds/loadingReportes.png" alt="Sin datos" style="max-height: 650px;">
      </div>

      <table *ngIf="dataLoaded" mat-table [dataSource]="dataSource" class="w-100">
        <ng-container matColumnDef="index">
          <th mat-header-cell *matHeaderCellDef>#</th>
          <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</td>
        </ng-container>
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>ID</th>
          <td mat-cell *matCellDef="let element">{{ element.id }}</td>
        </ng-container>

         <ng-container matColumnDef="placa_vehiculo">
          <th mat-header-cell *matHeaderCellDef>Placa</th>
          <td mat-cell *matCellDef="let element">{{ element.placa_vehiculo }}</td>
        </ng-container>
    
        <ng-container matColumnDef="fecha_entrada">
          <th mat-header-cell *matHeaderCellDef>Fecha Entrada</th>
          <td mat-cell *matCellDef="let element">{{ element.fecha_entrada }}</td>
        </ng-container>
    
        <ng-container matColumnDef="hora_ingreso">
          <th mat-header-cell *matHeaderCellDef>Hora Ingreso</th>
          <td mat-cell *matCellDef="let element">{{ element.hora_ingreso }}</td>
        </ng-container>
    
        <ng-container matColumnDef="fecha_salida">
          <th mat-header-cell *matHeaderCellDef>Fecha Salida</th>
          <td mat-cell *matCellDef="let element">{{ element.fecha_salida || '-' }}</td>
        </ng-container>
    
        <ng-container matColumnDef="hora_salida">
          <th mat-header-cell *matHeaderCellDef>Hora Salida</th>
          <td mat-cell *matCellDef="let element">{{ element.hora_salida || '-' }}</td>
        </ng-container>
    
        <ng-container matColumnDef="tipo_vehiculo_nombre">
          <th mat-header-cell *matHeaderCellDef>Tipo</th>
          <td mat-cell *matCellDef="let element">{{ element.tipo_vehiculo_nombre }}</td>
        </ng-container>
    
        <ng-container matColumnDef="tarifa_monto_por_hora">
          <th mat-header-cell *matHeaderCellDef>Tarifa x Hora</th>
          <td mat-cell *matCellDef="let element">{{ element.tarifa_monto_por_hora }}</td>
        </ng-container>

        <ng-container matColumnDef="pago_total">
          <th mat-header-cell *matHeaderCellDef>Pago Total</th>
          <td mat-cell *matCellDef="let element">S/ {{ element.pago_total }}</td>
        </ng-container>

         
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="shadow-hover-row"></tr>
      </table>
    </div>
    </mat-card-content>
</mat-card>
