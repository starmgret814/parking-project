<mat-form-field appearance="outline" class="m-t-12" style="width: 40%">
  <i matPrefix class="fi fi-rs-search m-l-8"></i>
  <input
    matInput
    class="placeholder-light"
    placeholder="Buscar usuario"
    [(ngModel)]="searchTerm"
    (ngModelChange)="filterUsers()"
  />
</mat-form-field>
<!-- ////////////////////////////////////// -->
<!-- ////////////////////////////////////// -->
<!-- ////////////////////////////////////// -->
<mat-card class="card-style">
  <mat-card-content>
    <div class="d-flex flex-column gap-3 m-b-20">
      <div class="m-r-auto m-t-5">
        <mat-card-title class="f-s-24 f-w-600">
          Gesti√≥n de Usuarios
        </mat-card-title>
      </div>
      <i
        class="fi fi-rr-user-add icon-blue-sm m-l-15"
        matTooltip="Agregar usuario"
        style="font-size: 28.5px; cursor: pointer"
        (click)="openAddUserModal()"
      ></i>
      <i
        class="fi fi-rr-lead-management icon-blue-sm m-l-15"
        matTooltip="Gestionar permisos  "
        style="font-size: 28.5px; cursor: pointer"
        (click)="openRoleDialog()"
      ></i>
    </div>

    <!-- Lista de usuarios -->
    <div class="users-grid">
      <ng-container *ngFor="let user of filteredUsers">
        <mat-card
          class="m-t-0 m-b-0"
          style="border: 1px solid #ddd; padding: 24px"
        >
          <div
            class="d-flex justify-content-between align-items-center flex-wrap"
          >
            <!-- Usuario -->
            <div style="flex: 1; min-width: 200px">
              <div class="d-flex align-items-center gap-2">
                <div class="f-w-500 f-s-18">
                  {{
                    user.nombre + " " + user.apellido_p + " " + user.apellido_m
                      | titlecase
                  }}
                </div>

                <i
                  class="fi fi-rr-user-pen icon-blue-lg m-l-10"
                  matTooltip="Editar"
                  style="cursor: pointer; font-size: 20px"
                  (click)="openEditUserDialog(user)"
                ></i>
                <i
                  class="fi fi-rr-remove-user icon-blue-lg m-l-10"
                  matTooltip="Eliminar"
                  style="cursor: pointer; font-size: 20px"
                  (click)="eliminarUsuario(user.id)"
                ></i>
              </div>

              <div class="m-t-5">
                <span
                  class="label-badge f-w-500 f-s-13"
                  style="margin-right: 5px"
                >
                  Rol: {{ user.rol.nombre }}
                </span>
                <span
                  class="label-badge f-w-500 f-s-13"
                  *ngIf="user.rol.nombre !== 'Administrador'"
                >
                  Turno: {{ user.turno }}
                </span>
              </div>

              <div class="f-w-400 m-t-5" style="font-size: 13.5px">
                Correo: {{ user.correo }}
              </div>
            </div>
          </div>
        </mat-card>
      </ng-container>
    </div>
  </mat-card-content>
</mat-card>
